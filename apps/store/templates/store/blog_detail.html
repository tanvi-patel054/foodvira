{% extends 'store/base.html' %}
{% block title %}Blog Details{% endblock %}

{% block body %}
<section class="text-gray-600 body-font">
  <div class="container px-5 py-24 mx-auto">
    <div class="flex flex-col lg:flex-row -mx-4">

      <!-- LEFT COLUMN: Blog Details -->
      <div class="lg:w-2/3 px-4 mb-8 lg:mb-0">
        <!-- Blog Title and Category -->
        <div class="flex flex-col text-left w-full mb-6">
          <h2 class="text-xs text-green-500 tracking-widest font-medium title-font mb-1">{{ blog.category.name }}</h2>
          <h1 class="sm:text-3xl text-2xl font-medium title-font text-gray-900 mb-2">{{ blog.title }}</h1>
          <p class="text-gray-500 text-sm">
            By {{ blog.author|default:"Admin" }} | {{ blog.created_at|date:"d M Y" }} 
          </p>
        </div>

        <!-- Blog Image -->
        {% if blog.image %}
        <div class="mb-6 w-full">
          <img class="w-full rounded-lg object-cover" src="{{ blog.image.url }}" alt="{{ blog.title }}">
        </div>
        {% endif %}

        <!-- Blog Content -->
        <div class="prose lg:prose-xl text-gray-700">
          {{ blog.content|linebreaks }}
        </div>
      </div>

      <!-- RIGHT COLUMN: Latest Blogs -->
      <div class="lg:w-1/3 px-4">
        <h2 class="text-xl font-medium title-font text-gray-900 mb-6">Latest Blogs</h2>
        <div class="space-y-4">
          {% for latest in latest_blogs %}
          <div class="border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden flex">
            {% if latest.image %}
            <img class="w-24 h-36 object-cover object-center" src="{{ latest.image.url }}" alt="{{ latest.title }}">
            {% endif %}
            <div class="p-4 flex-1">
              <h3 class="tracking-widest text-xs title-font font-medium text-green-500 mb-1">{{ latest.category.name }}</h3>
              <a href="{% url 'blog_detail' blog_id=latest.id %}" class="text-gray-900 font-medium title-font text-sm mb-2 block">{{ latest.title }}</a>
              <p class="text-gray-500 text-xs">{{ latest.content|truncatewords:10 }}</p>
            </div>
          </div>
          {% empty %}
          <p class="text-gray-500">No latest blogs available.</p>
          {% endfor %}
        </div>
      </div>

    </div>
  </div>
</section>
{% endblock %}
